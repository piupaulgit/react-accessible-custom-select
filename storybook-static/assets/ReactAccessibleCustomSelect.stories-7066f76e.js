import{a as u,j as i}from"./jsx-runtime-e6a661ac.js";import{r as m}from"./index-61bf1805.js";import"./_commonjsHelpers-de833af9.js";const r=e=>{const[a,s]=m.useState({activeOptionIndex:-1,buttonLabel:e.buttonLabel,isOpen:e.isOpen&&e.isOpen||!1,options:e.placeholder&&[{label:e.placeholder,value:""}].concat(e.options)||e.options,selectedOption:e.defaultValue&&e.options.filter(n=>n.value===e.defaultValue)[0]||{label:e.placeholder,value:""}});m.useEffect(()=>{const n=document.querySelector(`#${e.id}-react-accessible-custom-select ul li[tabIndex="0"]`);n&&n.focus()},[a.isOpen,a.activeOptionIndex]),m.useEffect(()=>{e.onChange&&e.onChange({id:e.id,value:a.selectedOption})},[a.selectedOption]);const O=n=>{const{key:l}=n;(l==="ArrowUp"||l==="ArrowDown"||l==="Enter"||l==="Spacebar")&&(n.preventDefault(),c()),l==="Tab"&&c()},g=n=>{var t;const{key:l}=n;n.preventDefault(),(l==="Enter"||l==="Spacebar")&&c(),l==="ArrowUp"&&s(o=>({...a,activeOptionIndex:o.activeOptionIndex>0?o.activeOptionIndex-1:a.options.length-1})),l==="ArrowDown"&&s(o=>({...a,activeOptionIndex:o.activeOptionIndex<a.options.length-1?o.activeOptionIndex+1:0})),(l==="Home"||l==="PageUp")&&s({...a,activeOptionIndex:0}),(l==="End"||l==="PageDown")&&s({...a,activeOptionIndex:a.options.length-1}),l==="Enter"&&b(n),(l==="Escape"||l==="Tab")&&(c(),(t=document.getElementById(e.id))==null||t.focus())},v=n=>{(!n.relatedTarget||!n.relatedTarget.closest(`#${e.id}-react-accessible-custom-select`))&&c()},c=n=>{a.isOpen?e.onClose(n):e.onOpen(n),s(l=>({...a,activeOptionIndex:!l.isOpen&&a.options.findIndex(t=>t.value===a.selectedOption.value)||a.activeOptionIndex,isOpen:!l.isOpen}))},b=n=>{var t;const l=a.options.find(o=>o.value.toString()===n.target.id);s({...a,isOpen:!1,selectedOption:l}),e.onClose(n),(t=document.getElementById(e.id))==null||t.focus()},h=n=>{e.onFocus&&e.onFocus(n)},q=()=>a.options.map((n,l)=>i("li",{"aria-label":n.label,"aria-selected":n.label===a.selectedOption.label,role:"option",tabIndex:l===a.activeOptionIndex?0:-1,className:`custom-select-dropdown-list-item ${a.selectedOption.label===n.label&&"selected"}`,id:`${n.value}`,value:n.value,children:n.label},l));return u("div",{className:`react-accessible-custom-select ${a.isOpen&&"expanded"||"collapsed"} ${e.className&&e.className||""} ${e.ariaInvalid&&"error"||""}`,id:`${e.id}-react-accessible-custom-select`,children:[(e==null?void 0:e.label)&&u("label",{className:"custom-select-label",htmlFor:e.id,children:[e==null?void 0:e.label,e.ariaRequired&&i("span",{className:"required-sybmol",children:"*"})]}),u("div",{className:"custom-select",children:[i("button",{"aria-describedby":e.ariaDescribedBy,"aria-expanded":a.isOpen,"aria-invalid":!0,"aria-owns":`customSelectList_${e.id}`,"aria-required":!0,className:`custom-select-button ${e.isDisabled?"disabled":""}`,disabled:e.isDisabled,id:e.id,onClick:c,onFocus:h,onKeyDown:O,role:"combobox",type:"button",children:a.selectedOption.label}),a.isOpen&&i("ul",{className:"custom-select-dropdown-list",id:`customSelectList_${e.id}`,onBlur:v,onClick:b,onKeyDown:g,role:"listbox",tabIndex:-1,children:q()})]}),e.ariaInvalid&&e.errorMessage&&i("p",{className:"error-message",children:e.errorMessage})]})};try{r.displayName="ReactAccessibleCustomSelect",r.__docgenInfo={description:"",displayName:"ReactAccessibleCustomSelect",props:{ariaDescribedBy:{defaultValue:null,description:"",name:"ariaDescribedBy",required:!1,type:{name:"string"}},ariaInvalid:{defaultValue:null,description:"",name:"ariaInvalid",required:!1,type:{name:"boolean"}},ariaRequired:{defaultValue:null,description:"",name:"ariaRequired",required:!1,type:{name:"boolean"}},buttonLabel:{defaultValue:null,description:"",name:"buttonLabel",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number"}},errorMessage:{defaultValue:null,description:"",name:"errorMessage",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!0,type:{name:"(e: any) => void"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(e: { id: string; value: IOption; }) => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(e: any) => void"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!0,type:{name:"(e: any) => void"}},onOpen:{defaultValue:null,description:"",name:"onOpen",required:!0,type:{name:"(e: any) => void"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"IOption[]"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}}}}}catch{}const _={component:r},I=e=>{console.log("onChange",e)},x=e=>{console.log("on Blur",e)},C=e=>{console.log("on open",e)},D=e=>{console.log("on Close",e)},V=e=>{console.log(e,"on focus")},w=[{label:"option 1",value:"1"},{label:"option 2",value:"2"},{label:"option 3",value:"3"},{label:"option 4",value:"4"}],d={render:()=>i("div",{children:i(r,{ariaDescribedBy:"select county from dropdown",ariaInvalid:!1,ariaRequired:!0,options:w,errorMessage:"Country field is required",label:"Select your country",id:"country",isDisabled:!1,onBlur:x,onChange:I,onFocus:V,onOpen:C,onClose:D,defaultValue:3,placeholder:"please choose...",buttonLabel:"Select option"})})};var f,p,y;d.parameters={...d.parameters,docs:{...(f=d.parameters)==null?void 0:f.docs,source:{originalSource:`{
  render: () => <div>
      <ReactAccessibleCustomSelect ariaDescribedBy="select county from dropdown" ariaInvalid={false} ariaRequired={true} options={staticOptions} errorMessage="Country field is required" label="Select your country" id="country" isDisabled={false} onBlur={onBlur} onChange={onChange} onFocus={onFocus} onOpen={onOpen} onClose={onClose} defaultValue={3} placeholder="please choose..." buttonLabel="Select option" />
    </div>
}`,...(y=(p=d.parameters)==null?void 0:p.docs)==null?void 0:y.source}}};const $=["Main"];export{d as Main,$ as __namedExportsOrder,_ as default};
//# sourceMappingURL=ReactAccessibleCustomSelect.stories-7066f76e.js.map
